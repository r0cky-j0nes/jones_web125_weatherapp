(function(){"use strict";var e={5212:function(e,a,t){var n=t(3751),o=t(641);const r={id:"app"};function s(e,a,t,n,s,i){const c=(0,o.g2)("SearchBar"),l=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(c),(0,o.bF)(l)])}t(4114);var i=t(33),c=t(953),l=t(5220);const u={class:"search-container"},v={class:"search-box"},d={key:0,class:"saved-locations"},p=["onClick"],m=["onClick"];var h={__name:"SearchBar",setup(e){const a=(0,c.KR)(""),t=(0,c.KR)(JSON.parse(localStorage.getItem("saved")||"[]")),r=(0,l.rd)(),s=(0,l.lq)();function h(){t.value=JSON.parse(localStorage.getItem("saved")||"[]")}function y(){a.value.trim()&&(r.push({name:s.name,query:{city:a.value.trim()}}),a.value="")}function f(e){r.push({name:s.name,query:{city:e}})}function w(e){t.value.splice(e,1),localStorage.setItem("saved",JSON.stringify(t.value))}return(0,o.sV)((()=>{window.addEventListener("saved-updated",h)})),(0,o.xo)((()=>{window.removeEventListener("saved-updated",h)})),(e,r)=>((0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("div",v,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),onKeyup:(0,n.jR)(y,["enter"]),placeholder:"Enter City or ZIP",class:"search-bar"},null,544),[[n.Jo,a.value]])]),t.value.length?((0,o.uX)(),(0,o.CE)("div",d,[r[1]||(r[1]=(0,o.Lk)("h3",null,"Saved Locations:",-1)),(0,o.Lk)("ul",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,((e,a)=>((0,o.uX)(),(0,o.CE)("li",{key:a},[(0,o.Lk)("button",{onClick:a=>f(e)},(0,i.v_)(e),9,p),(0,o.Lk)("button",{onClick:a=>w(e),class:"delete-btn"},"✖",8,m)])))),128))])])):(0,o.Q3)("",!0)]))}},y=t(6262);const f=(0,y.A)(h,[["__scopeId","data-v-50c55afc"]]);var w=f,g={name:"App",components:{SearchBar:w}};const k=(0,y.A)(g,[["render",s]]);var b=k,_=(t(8111),t(1701),t(6908)),C=t(3468);const L={class:"chart-container"},E={key:0,class:"err"},S={key:2},x="2f6532bf0e107efc40b25b23913398f7";var X={__name:"HourlyForecast",setup(e){C.t1.register(C.hE,C.m_,C.s$,C.No,C.FN,C.PP,C.kc);const a=(0,l.lq)(),t=a.query.city||"",n=(0,c.KR)({labels:[],datasets:[]}),r={responsive:!0,maintainAspectRatio:!1},s=(0,c.KR)("");return(0,o.sV)((async()=>{if(t)try{const e=`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(t)}&units=imperial&appid=${x}`,a=await fetch(e),o=await a.json();if("200"!==o.cod||!Array.isArray(o.list))throw new Error(o.message||"Invalid forecast data.");const r=o.list.slice(0,8);n.value={labels:r.map((e=>new Date(e.dt_txt).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}))),datasets:[{label:"Temperature (°F)",data:r.map((e=>e.main.temp)),borderColor:"rgba(75,192,192,1)",tension:.4},{label:"Rain (mm)",data:r.map((e=>e.rain?.["3h"]||0)),backgroundColor:"rgba(54,162,235,0.2)",borderColor:"rgba(54,162,235,0.6)",tension:.4}]}}catch(e){s.value=e.message}else s.value="No city specified."})),(e,a)=>((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("h2",null,"Hourly Forecast for "+(0,i.v_)((0,c.R1)(t)),1),s.value?((0,o.uX)(),(0,o.CE)("p",E,(0,i.v_)(s.value),1)):n.value.labels.length?((0,o.uX)(),(0,o.Wv)((0,c.R1)(_.N1),{key:1,data:n.value,options:r},null,8,["data"])):((0,o.uX)(),(0,o.CE)("p",S,"Loading hourly data…"))]))}};const F=(0,y.A)(X,[["__scopeId","data-v-5af29605"]]);var R=F;t(116),t(8237);const O={class:"forecast-container"},$={key:0,class:"error"},j={key:1,class:"cards"},A=["src","alt"],I={class:"card-date"},q={class:"card-cond"},K={class:"card-temps"},D={key:2},H="2f6532bf0e107efc40b25b23913398f7";var M={__name:"FiveDayForecast",setup(e){const a=(0,l.lq)(),t=a.query.city||"",n=(0,c.KR)([]),r=(0,c.KR)("");async function s(){if(t)try{const e=`https://api.openweathermap.org/data/2.5/forecast?q=${encodeURIComponent(t)}&units=imperial&appid=${H}`,a=await fetch(e),o=await a.json();if("200"!==o.cod||!Array.isArray(o.list))throw new Error(o.message||"Invalid forecast data.");const r=o.list.reduce(((e,a)=>{const t=a.dt_txt.split(" ")[0];if(e[t]){e[t].max=Math.max(e[t].max,a.main.temp_max),e[t].min=Math.min(e[t].min,a.main.temp_min);const n=a.weather[0].main;e[t].condCount[n]=(e[t].condCount[n]||0)+1}else e[t]={date:new Date(t).getTime(),max:a.main.temp_max,min:a.main.temp_min,condCount:{[a.weather[0].main]:1}};return e}),{}),s=Object.entries(r).map((([e,a])=>{const t=Object.keys(a.condCount).reduce(((e,t)=>a.condCount[e]>a.condCount[t]?e:t)),n=o.list.find((a=>a.dt_txt.startsWith(e)&&a.weather[0].main===t)),r=n?n.weather[0].icon:"";return{date:a.date,max:a.max,min:a.min,main:t,icon:r}}));s.sort(((e,a)=>e.date-a.date)),n.value=s.slice(0,5)}catch(e){console.error(e),r.value=e.message}else r.value="No city specified—search first."}return(0,o.sV)(s),(e,a)=>((0,o.uX)(),(0,o.CE)("div",O,[(0,o.Lk)("h2",null,"5-Day Forecast for "+(0,i.v_)((0,c.R1)(t)),1),r.value?((0,o.uX)(),(0,o.CE)("p",$,(0,i.v_)(r.value),1)):n.value.length?((0,o.uX)(),(0,o.CE)("div",j,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.value,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"day-card",key:e.date},[e.icon?((0,o.uX)(),(0,o.CE)("img",{key:0,src:`https://openweathermap.org/img/wn/${e.icon}@2x.png`,alt:e.main,class:"card-icon"},null,8,A)):(0,o.Q3)("",!0),(0,o.Lk)("div",I,(0,i.v_)(new Date(e.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})),1),(0,o.Lk)("div",q,(0,i.v_)(e.main),1),(0,o.Lk)("div",K,[(0,o.Lk)("span",null,"High: "+(0,i.v_)(Math.round(e.max))+"°F",1),(0,o.Lk)("span",null,"Low: "+(0,i.v_)(Math.round(e.min))+"°F",1)])])))),128))])):((0,o.uX)(),(0,o.CE)("p",D,"Loading 5-day forecast…"))]))}};const N=(0,y.A)(M,[["__scopeId","data-v-6f287ace"]]);var U=N;const T={key:0,class:"prompt"},W={key:1,class:"weather-wrap"},P={class:"weather-card"},J={class:"location-box"},Q={class:"location"},V={key:0},B={class:"datetime"},z={class:"date"},Z={class:"time"},G={class:"temp-range"},Y={class:"weather-box"},ee={class:"temp"},ae={class:"weather-icon"},te=["src","alt"],ne={class:"weather"},oe={class:"toggle-btns"},re={key:2,class:"error"},se={key:3},ie="2f6532bf0e107efc40b25b23913398f7";var ce={__name:"weatherHome",setup(e){const a=(0,l.lq)(),t=(0,l.rd)(),n=(0,c.KR)(a.query.city||""),r=(0,c.KR)({}),s=(0,c.KR)(""),u=(0,c.KR)(""),v=(0,o.EW)((()=>{if(!r.value.timezone)return"";const e=Date.now(),a=e+1e3*r.value.timezone,t=new Date(a),n=t.getUTCHours(),o=t.getUTCMinutes(),s=n>=12?"PM":"AM",i=(n+11)%12+1,c=String(o).padStart(2,"0");return`${i}:${c} ${s}`}));function d(){const e=new Date;return e.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}function p(){if(!r.value.main)return"";const e=r.value.main.temp;return e<50?"cold":e>80?"hot":"mild"}async function m(e){try{const a=await fetch(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(e)}&limit=1&appid=${ie}`),t=await a.json();if(!Array.isArray(t)||!t.length)throw new Error("Location not found");const{lat:n,lon:o,state:r,country:s,name:i}=t[0];await h(n,o,i,r,s)}catch(a){s.value=a.message}}async function h(e,o,i="",c="",l=""){try{const s=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${o}&units=imperial&appid=${ie}`),u=await s.json();if(200!==u.cod)throw new Error(u.message||"Weather fetch failed");let v=i,d=c,p=l;if(!v){const a=await fetch(`https://api.openweathermap.org/geo/1.0/reverse?lat=${e}&lon=${o}&limit=1&appid=${ie}`),t=await a.json();Array.isArray(t)&&t.length?(v=t[0].name,d=t[0].state||"",p=t[0].country||u.sys.country):(v=u.name,d="",p=u.sys.country)}r.value={...u,name:v,state:d,country:p},n.value=v,t.replace({name:a.name,query:{city:v}})}catch(u){s.value=u.message}}function y(){console.log("[saveLocation] clicked, city =",n.value);const e=JSON.parse(localStorage.getItem("saved")||"[]");n.value&&!e.includes(n.value)?(e.push(n.value),localStorage.setItem("saved",JSON.stringify(e)),window.dispatchEvent(new Event("saved-updated")),window.dispatchEvent(new Event("saved-updated")),console.log("[saveLocation] new list =",e)):console.log("[saveLocation] nothing to save or already saved")}return(0,o.sV)((()=>{n.value?m(n.value):navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>h(e.coords.latitude,e.coords.longitude)),(()=>{}))})),(0,o.wB)((()=>a.query.city),(e=>{e&&(n.value=e,m(e))})),(e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:(0,i.C4)(p())},[(0,o.Lk)("main",null,[n.value?r.value.main?((0,o.uX)(),(0,o.CE)("div",W,[(0,o.Lk)("div",P,[(0,o.Lk)("div",J,[(0,o.Lk)("div",Q,[(0,o.eW)((0,i.v_)(r.value.name)+" ",1),r.value.state?((0,o.uX)(),(0,o.CE)("span",V,", "+(0,i.v_)(r.value.state),1)):(0,o.Q3)("",!0),(0,o.eW)(", "+(0,i.v_)(r.value.country),1)]),(0,o.Lk)("button",{onClick:a[0]||(a[0]=e=>y()),class:"save-btn"}," Save This Location "),(0,o.Lk)("div",B,[(0,o.Lk)("div",z,(0,i.v_)(d()),1),(0,o.Lk)("div",Z,(0,i.v_)(v.value),1)])]),(0,o.Lk)("div",G," High: "+(0,i.v_)(Math.round(r.value.main.temp_max))+"°F / Low: "+(0,i.v_)(Math.round(r.value.main.temp_min))+"°F ",1),(0,o.Lk)("div",Y,[(0,o.Lk)("div",ee,(0,i.v_)(Math.round(r.value.main.temp))+"°F",1),(0,o.Lk)("div",ae,[(0,o.Lk)("img",{src:`https://openweathermap.org/img/wn/${r.value.weather[0].icon}@2x.png`,alt:r.value.weather[0].description},null,8,te)]),(0,o.Lk)("div",ne,(0,i.v_)(r.value.weather[0].main),1)]),(0,o.Lk)("div",oe,[(0,o.Lk)("button",{onClick:a[1]||(a[1]=e=>u.value="hourly")},"Show Hourly"),(0,o.Lk)("button",{onClick:a[2]||(a[2]=e=>u.value="5day")},"Show 5-Day"),(0,o.Lk)("button",{onClick:a[3]||(a[3]=e=>u.value="")},"Hide Forecast")])]),"hourly"===u.value?((0,o.uX)(),(0,o.Wv)(R,{key:0,city:n.value,class:"forecast-panel"},null,8,["city"])):(0,o.Q3)("",!0),"5day"===u.value?((0,o.uX)(),(0,o.Wv)(U,{key:1,city:n.value,class:"forecast-panel"},null,8,["city"])):(0,o.Q3)("",!0)])):s.value?((0,o.uX)(),(0,o.CE)("p",re,(0,i.v_)(s.value),1)):((0,o.uX)(),(0,o.CE)("p",se,"Loading current weather…")):((0,o.uX)(),(0,o.CE)("p",T," Use the search bar above or allow location access. "))])],2))}};const le=(0,y.A)(ce,[["__scopeId","data-v-315ac6f5"]]);var ue=le;const ve=[{path:"/hourly",name:"HourlyForecast",component:R},{path:"/5day",name:"FiveDayForecast",component:U},{path:"/",name:"weatherHome",component:ue}],de=(0,l.aE)({history:(0,l.LA)("/jones_web125_weatherapp/"),routes:ve});var pe=de;(0,n.Ef)(b).use(pe).mount("#app")}},a={};function t(n){var o=a[n];if(void 0!==o)return o.exports;var r=a[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(a,n,o,r){if(!n){var s=1/0;for(u=0;u<e.length;u++){n=e[u][0],o=e[u][1],r=e[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](n[c])}))?n.splice(c--,1):(i=!1,r<s&&(s=r));if(i){e.splice(u--,1);var l=o();void 0!==l&&(a=l)}}return a}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,o,r]}}(),function(){t.d=function(e,a){for(var n in a)t.o(a,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:a[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,n){var o,r,s=n[0],i=n[1],c=n[2],l=0;if(s.some((function(a){return 0!==e[a]}))){for(o in i)t.o(i,o)&&(t.m[o]=i[o]);if(c)var u=c(t)}for(a&&a(n);l<s.length;l++)r=s[l],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},n=self["webpackChunkjones_web125_weatherapp"]=self["webpackChunkjones_web125_weatherapp"]||[];n.forEach(a.bind(null,0)),n.push=a.bind(null,n.push.bind(n))}();var n=t.O(void 0,[504],(function(){return t(5212)}));n=t.O(n)})();
//# sourceMappingURL=app.2dfcec1b.js.map